# 逻辑设计

## CLI版本设计

- 先不考虑联机情况，因此对于游戏中除了玩家外的两位，采用随机的办法实现，便于功能调试。
- 目前我们可以来尝试实现一个CLI(命令行)版本的斗地主，然后再将其对接到我们的UI界面上。 用户通过CLI输入指令来进行操作，例如查看当前手牌，打牌，不出，出哪些牌。然后程序也将用户的输入进行反馈，同时进行游戏逻辑处理。
- 首先我们需要做的是，确定好游戏的阶段：很显然一句游戏的阶段可以是一张流程图。
    - 发牌阶段
    - 抢地主阶段
    - 打牌阶段/轮流出牌
    - 游戏结束
- 然后对于不同的阶段，处理如何实现。

- 指令设计：设计需要支持的指令(实际上这部分指令将会作为UI和逻辑的接口设计)

- 发牌阶段：输出必要的信息，比如说告诉玩家游戏开始了，然后发牌。
- 抢地主阶段：询问是否需要抢地主，这个规则之前也提交了设计，根据设计来就行。
- 然后到打牌阶段，这个时候出现了交互，用户使用CLI输入指令，然后我们需要反馈给用户，部分指令会结束用户当前阶段(出牌或者不要)，然后进行其他用户的操作，同时也需要输出出来(比如说对方是不要还是出了啥牌)。此处还需要考虑牌能不能出，是否胜利等合法性的情况。
- 游戏结束，该回家的回家。

## 代码设计

- 由于不涉及UI相关，因此相对容易。
- 很显然我们可以为每个阶段维护一个系统，然后通过禁用和启用系统来实现阶段的切换。每个系统对应每个阶段的逻辑。比如说发牌阶段输出发牌的信息，然后跳转到抢地主阶段。打牌阶段则是从输入队列获取输入的指令，然后进行分析并且处理(比如说如果要显示手牌，就输出手牌)。
- 而输入队列这部分实现就是简单的获取用户的输入，存放起来。这部分可以交给framework实现(我会更新支持下)。

